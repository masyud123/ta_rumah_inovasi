<!-- fontawesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js" integrity="sha512-6PM0qYu5KExuNcKt5bURAoT6KCThUmHRewN3zUFNaoI6Di7XJPTMoT6K0nsagZKk2OB4L7E3q1uQKHNHd4stIQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<div class="container-fluid">
    <div class="card shadow bg-gradient-light">
        <div class="card-body">
            <div class="text-center">
                <h3 class="col-12"><b>FORM PENDAFTARAN INOVASI</b></h3>
                <h6>Isi semua formulir untuk melanjutkan ke langkah berikutnya</h6>
            </div>
            <!-- header form -->
            <div class="d-none d-md-block col-12 mb-4">
                <!-- header 1 -->
                <div id="header1">
                    <div class="d-flex align-items-center" style="height: 100px;">
                        <div class="col-12 d-flex justify-content-center">
                            <div class="d-flex justify-content-center col-12">
                                <div class="bg-primary col-4" style="height: 5px;"></div>
                                <div class="bg-gray-500 col-4" style="height: 5px;"></div>
                                <div class="bg-gray-500 col-4" style="height: 5px;"></div>
                            </div>
                            <div class="col-12 d-flex justify-content-around" style="position: absolute; margin-top: -27px;">
                                <div class="bg-primary d-flex align-items-center justify-content-center head1" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fa fa-user fa-2x text-light "></i></div>
                                <div class="bg-gray-500 d-flex align-items-center justify-content-center head2" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fas fa-file-alt fa-2x text-light "></i></div>
                                <div class="bg-gray-500 d-flex align-items-center justify-content-center head3" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fas fa-file-upload fa-2x text-light "></i></div>
                            </div>
                            <div class="col-12 d-flex justify-content-between" style="position: absolute; margin-top: 35px;">
                                <div class="col-4 text-center">
                                    <h5 class="text-dark"><b>PROFIL</b></h5>
                                </div>
                                <div class="col-4 text-center">
                                    <h5 class="text-gray-500"><b>INOVASI</b></h5>
                                </div>
                                <div class="col-4 text-center">
                                    <h5 class="text-gray-500"><b>BERKAS</b></h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- header 2 -->
                <div id="header2" style="display: none;">
                    <div class="d-flex align-items-center" style="height: 100px;">
                        <div class="col-12 d-flex justify-content-center">
                            <div class="d-flex justify-content-center col-12">
                                <div class="bg-gray-500 col-4" style="height: 5px;"></div>
                                <div class="bg-primary col-4" style="height: 5px;"></div>
                                <div class="bg-gray-500 col-4" style="height: 5px;"></div>
                            </div>
                            <div class="col-12 d-flex justify-content-around" style="position: absolute; margin-top: -27px;">
                                <div class="bg-gray-500 d-flex align-items-center justify-content-center head1" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fa fa-user fa-2x text-light"></i></div>
                                <div class="bg-primary d-flex align-items-center justify-content-center head2" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fas fa-file-alt fa-2x text-light"></i></div>
                                <div class="bg-gray-500 d-flex align-items-center justify-content-center head3" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fas fa-file-upload fa-2x text-light"></i></div>
                            </div>
                            <div class="col-12 d-flex justify-content-between" style="position: absolute; margin-top: 35px;">
                                <div class="col-4 text-center">
                                    <h5 class="text-gray-500"><b>PROFIL</b></h5>
                                </div>
                                <div class="col-4 text-center">
                                    <h5 class="text-dark"><b>INOVASI</b></h5>
                                </div>
                                <div class="col-4 text-center">
                                    <h5 class="text-gray-500"><b>BERKAS</b></h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- header 3 -->
                <div id="header3" style="display: none;">
                    <div class="d-flex align-items-center" style="height: 100px;">
                        <div class="col-12 d-flex justify-content-center">
                            <div class="d-flex justify-content-center col-12">
                                <div class="bg-gray-500 col-4" style="height: 5px;"></div>
                                <div class="bg-gray-500 col-4" style="height: 5px;"></div>
                                <div class="bg-primary col-4" style="height: 5px;"></div>
                            </div>
                            <div class="col-12 d-flex justify-content-around" style="position: absolute; margin-top: -27px;">
                                <div class="bg-gray-500 d-flex align-items-center justify-content-center head1" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fa fa-user fa-2x text-light"></i></div>
                                <div class="bg-gray-500 d-flex align-items-center justify-content-center head2" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fas fa-file-alt fa-2x text-light"></i></div>
                                <div class="bg-primary d-flex align-items-center justify-content-center head3" style="cursor: pointer; width: 60px; height: 60px; border-radius: 100%;"><i class="fas fa-file-upload fa-2x text-light"></i></div>
                            </div>
                            <div class="col-12 d-flex justify-content-between" style="position: absolute; margin-top: 35px;">
                                <div class="col-4 text-center">
                                    <h5 class="text-gray-500"><b>PROFIL</b></h5>
                                </div>
                                <div class="col-4 text-center">
                                    <h5 class="text-gray-500"><b>INOVASI</b></h5>
                                </div>
                                <div class="col-4 text-center">
                                    <h5 class="text-dark"><b>BERKAS</b></h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- isian formulir -->
            <div id="formulir1">
                <form id="form1" method="POST" enctype="multipart/form-data">
                    <div class="card shadow">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="">
                                        <dt>Kategori</dt>
                                        <div class="form-check form-check-inline">
                                            <input id="kategori1" value="umum" name="kategori_peserta" class="form-check-input kategori" type="radio">
                                            <label for="kategori1" class="form-check-label">Umum</label>
                                        </div>
                                        <div class="form-check form-check-inline ml-4">
                                            <input id="kategori2" value="pelajar" name="kategori_peserta" class="form-check-input kategori" type="radio">
                                            <label for="kategori2" class="form-check-label">Pelajar</label>
                                        </div>
                                    </div><br>
                                    <div class="">
                                        <dt>Interaksi</dt>
                                        <div class="form-check form-check-inline">
                                            <input id="interaksi1" value="Individu" name="interaksi" class="form-check-input interaksi" type="radio">
                                            <label for="interaksi1" class="form-check-label">Individu</label>
                                        </div>
                                        <div class="form-check form-check-inline ml-3">
                                            <input id="interaksi2" value="Kelompok" name="interaksi" class="form-check-input interaksi" type="radio">
                                            <label for="interaksi2" class="form-check-label">Kelompok</label>
                                        </div>
                                    </div><br>
                                    <div class="form-group">
                                        <dt>Nama Inovasi</dt>
                                        <input class="form-control" type="text" name="judul">
                                    </div>
                                    <div class="form-group">
                                        <dt>Bidang</dt>
                                        <select class="form-control" name="id_bidang">
                                            <option selected disabled hidden>Pilih Bidang</option>
                                            <?php foreach($list_bidang as $bidang):?>
                                            <option value="<?=$bidang->id?>"><?=$bidang->bidang?></option>
                                            <?php endforeach;?>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <dt>Nama Ketua/ Nama Pengusul</dt>
                                        <input class="form-control" type="text" name="nama_ketua">
                                    </div>
                                    <div class="form-group">
                                        <dt>Email Ketua</dt>
                                        <input class="form-control" type="text" name="email_ketua">
                                    </div>
                                    <div class="form-group">
                                        <dt>No. HP/WA</dt>
                                        <input class="form-control" type="text" name="no_hp">
                                    </div>
                                    <div class="form-group">
                                        <dt>Alamat</dt>
                                        <input class="form-control" type="text" name="alamat_ketua">
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <dt>Foto KTP/ Kartu Pelajar</dt>
                                        <div class="d-md-flex align-items-center justify-content-between">
                                            <div class="custom-file col-lg-7 mb-3">
                                                <input id="gambar" name="ktp" type="file" class="custom-file-input" accept="image/*">
                                                <label class="custom-file-label" for="gambar">Pilih file...</label>
                                            </div>
                                            <div class="col-lg-5">
                                                <img id="tampil-gambar" src="#" alt="your image" width="100%"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" id="pelajar" style="display: none;">
                                        <dt>Asal Sekolah</dt>
                                        <input class="form-control" type="text" name="asal_sekolah">
                                    </div>
                                    <div id="kelompok" style="display: none;">
                                        <div class="form-group">
                                            <dt>Nama Tim</dt>
                                            <input class="form-control" type="text" name="nama_tim">
                                        </div>
                                        <div id="nama_anggota">
                                            <div class="form-group">
                                                <dt>Nama Anggota</dt>
                                                <input class="form-control col-10" type="text" name="nama_anggota[0]">
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-center mt-3">
                                            <button type="button" class="btn btn-sm btn-info" id="tambah-anggota">
                                                <i class="fa fa-plus mr-1"></i> Tambah Anggota
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end mt-3">
                        <a href="<?=base_url('peserta/riwayat/')?>" class="btn btn-sm btn-secondary" type="button"><i class="fas fa-arrow-left mr-1"></i>Batal</a>
                        <button id="submit1" class="btn btn-sm btn-primary ml-3" type="submit">Selanjutnya<i class="fas fa-arrow-right ml-1"></i></button>
                    </div>
                </form>
            </div>
            <div id="formulir2" style="display: none;"></div>
            <div id="formulir3" style="display: none;"></div>
        </div>
    </div>
</div>
<br><br>
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<script type="text/javascript">
    $(document).ready(function(){
        // $('.head1').on('click', function(){
        //     $('#header1').show();
        //     $('#header2').hide();
        //     $('#header3').hide();
        // })
        // $('.head2').on('click', function(){
        //     $('#header1').hide();
        //     $('#header2').show();
        //     $('#header3').hide();
        // })
        // $('.head3').on('click', function(){
        //     $('#header1').hide();
        //     $('#header2').hide();
        //     $('#header3').show();
        // })

        // tampil nama sekolah jika kategori pelajar
        $('.kategori').on('click', function(){
            if($(this).val() == 'pelajar'){
                $('#pelajar').show();
            }else{
                $('#pelajar').hide();
            }
        })

        // tampil nama anggota jika interaksi kelompok
        $('.interaksi').on('click', function(){
            if($(this).val() == 'Kelompok'){
                $('#kelompok').show();
            }else{
                $('#kelompok').hide();
            }
        })

        // tampil gambar ktp
        $('#gambar').on('change', function(){
            if (this.files && this.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#tampil-gambar').attr('src', e.target.result);
                }
                reader.readAsDataURL(this.files[0]);
            }
        })

        // tambah nama anggota
        var wrapper = $("#nama_anggota");
        a = 1;
        $('#tambah-anggota').on('click', function(){
            if(wrapper.children().length >= 5){
                Swal.fire('Informasi','Jumlah anggota maksimal 5','info');
            }else{
                $(wrapper).append(''+
                    '<div class="d-flex justify-content-between mt-4">'+
                        '<input class="form-control col-10" type="text" name="nama_anggota['+ a++ +']">'+
                        '<div class="d-flex justify-content-center col-2">'+
                            '<button class="btn btn-danger btn-circle remove-anggota"><i class="fa fa-trash"></i></button>'+
                        '</div>'+
                    '</div>'+
                '');
            }
        })

        // hapus nama anggota
        $(wrapper).on('click', '.remove-anggota', function(){
            $(this).parent('div').parent('div').remove();
        });

        //submit form 1
        $("form#form1").submit(function(e) {
            e.preventDefault();    
            var formData = new FormData(this);

            $.ajax({
                url: "<?=base_url('peserta/daftar/cek_form_1/'.$subevent->id)?>",
                type: 'POST',
                data: formData,
                success: function (hasil) {
                    console.log(hasil);
                },
                cache: false,
                contentType: false,
                processData: false
            });
        });
    })
</script>